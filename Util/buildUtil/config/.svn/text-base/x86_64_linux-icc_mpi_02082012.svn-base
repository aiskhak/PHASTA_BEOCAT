# Makefile addition for x86_linux architecture/OS.
# It uses Intel C++ compiler 5.0 for C/C++ files
# and Intel F95 compiler 5.0 for Fortran files.
STATIC_LIB_EXT := a
SHARED_LIB_EXT := so

DEFS := $(DEFS) -DLINUX -DFORT_LC_US -D_SCOREC_NewCompiler -DUNIX
libtmpl = -L$(1) -Wl,-rpath,$(1)
ifdef INSURE
#  CC := insure icc
#  CXX := insure icpc
  CC := insure mpicc
  CXX := insure mpicxx
else
#  CC := icc
#  CXX := icpc
   CC := mpicc
   CXX := mpicxx
endif
#FC := ifort
FC := mpif90 
HAS_TEMP_REP := 0
CXXFLAGS := -w -Krtti -unroll -Kc++eh $(CXXFLAGS)
CFLAGS := -w -unroll $(CFLAGS)
#FFLAGS := -cm $(FFLAGS)
DEPFLAG := -M $(DEPFLAGS)
ifeq ($(VERS),opt)
  CFLAGS := -ip    $(CFLAGS)
  CXXFLAGS := -ip $(CXXFLAGS)
  FFLAGS :=  -ip $(FFLAGS)
else
  CFLAGS := -g $(CFLAGS)
  CXXFLAGS := -g  $(CXXFLAGS)
  FFLAGS := -g  $(FFLAGS)
endif
ifeq ($(ISEXECUTABLE),)
   ifeq ($(NOSHARED),1)
      REALAR := ar -cru 
   else
#      REALAR := icpc -shared -o 
      REALAR := mpicxx -shared -o
      CFLAGS := -fPIC $(CFLAGS)
      CXXFLAGS := -KPIC  $(CXXFLAGS)
      FFLAGS := -KPIC $(FFLAGS)
   endif
   else
#      REALAR := icpc -o
      REALAR := mpicxx -o
endif
